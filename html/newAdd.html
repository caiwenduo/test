<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<title>xhr2</title>
	</head>
	<body>	
		<div style="text-align:center;margin:100px">		
			<input type="file" id="file" name="file" multiple="multiple"><progress id="uploadprogress" min="0" max="100" value="0">0</progress>
			<button onclick="xhr2()">多文件上传</button>
		</div>
		<script type="text/javascript" src="jquery-3.1.1.min.js"></script>
		<script>
		function xhr2(){
			var xhr = new XMLHttpRequest();//第一步
			//定义表单变量
			var file = document.getElementById('file').files;
			//console.log(file.length);
			//新建一个FormData对象
			var formData = new FormData(); //++++++++++
			//追加文件数据
			for(i=0;i<file.length;i++){
				console.log(file[i])
				formData.append("file", file[i]); //++++++++++
				$.ajax({
	    		type:"post",
	    		url:"http://106.14.248.127:8080/api/v1/upload",
	    		async:false,
	    		cache: false,
	    		dataType:"json",
			    data: formData,
			    processData: false,
			    contentType: false,
			    success:function(res){
			    	console.log(res);
			    }
	    	})
			} 
			//formData.append("file", file[0]); //++++++++++
			console.log(formData)
			//post方式
			

			
		}
		</script>
	</body>
</html>